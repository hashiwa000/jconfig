apply plugin: 'java'

sourceCompatibility = '1.8'
targetCompatibility = '1.8'


repositories {
  mavenCentral()
}

dependencies {
  testCompile 'junit:junit:4.12'
  testCompile 'org.projectlombok:lombok:1.16.12'
}

compileJava {
  options.fork = true
  options.forkOptions.executable = 'javac'
  options.compilerArgs << "-XDignore.symbol.file"
}

jar {
  manifest {
    attributes 'Premain-Class': 'jconfig.InstrumentAgent'
  }
}

test {
  jvmArgs '-javaagent:build/libs/jconfig.jar=src/test/resources/myconf.properties'
}
